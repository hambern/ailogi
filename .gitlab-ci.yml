stages:
  - debug

debug:
  stage: debug
  before_script:
    - apt-get update -y && apt-get install -y git openssh-client
    - mkdir -p ~/.ssh
    - echo "$SSH_PRIVATE_KEY" > ~/.ssh/id_rsa
    - chmod 600 ~/.ssh/id_rsa
    - ssh-keygen -y -f ~/.ssh/id_rsa > ~/.ssh/id_rsa.pub  # Generera den publika nyckeln
  script:
    - echo "ğŸ”‘ Publika nyckeln som GitLab anvÃ¤nder:"
    - cat ~/.ssh/id_rsa.pub  # Skriv ut den publika nyckeln
    - echo "ğŸ” Testar SSH-anslutning som alogi..."
    - ssh -o "IdentitiesOnly=yes" -i ~/.ssh/id_rsa alogi@ailogi.se "echo 'âœ… GitLab CI/CD kan nu ansluta!'"
  only:
    - main
